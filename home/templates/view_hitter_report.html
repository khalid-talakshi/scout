{% extends "master.html" %}
{% load team_id_to_code %}
{% load get_stat_by_name %}
{% load order_by_custom_stat %}

{% block title %} {{report.name}} | Scout {% endblock %}
{% block content %}
<div class='d-flex justify-content-between my-2'>
    <h2>View Hitting Report</h2>
    <div>
        <a href="/hitter-report/create" class='btn scout-btn mr-2'>Create New Report</a>
        <a href="/" class='btn scout-btn'>Back to Reports</a>
    </div>
</div>
<div class='card'>
    <div class='card-header'>
        <div class='d-flex'>
            <img src="
            https://www.mlbstatic.com/team-logos/{{report.team}}.svg" class='team-logo' />
            <div class='d-flex align-items-end flex-grow-1'>
                <div class='d-flex flex-column mx-2 flex-grow-1'>
                    <h5 class='scout-subtitle'>Player</h5>
                    <h3 class='scout-title'>{{report.lastname}}, {{report.firstname}}</h3>
                </div>
                <div class='d-flex flex-column mx-2'>
                    <h5 class='scout-subtitle'>Date</h5>
                    <h5 class='scout-title'>{{report.date}}</h5>
                </div>
                <div class='d-flex flex-column mx-2'>
                    <h5 class='scout-subtitle'>Team</h5>
                    <h5 class='scout-title'>{{report.team | team_id_to_code}}</h5>
                </div>
                <div class='d-flex flex-column mx-2'>
                    <h5 class='scout-subtitle'>Position</h5>
                    <h5 class='scout-title'>{{report.position}}</h5>
                </div>
                <div class='d-flex flex-column mx-2'>
                    <h5 class='scout-subtitle'>Bat</h5>
                    <h5 class='scout-title'>{{report.bats}}</h5>
                </div>
                <div class='d-flex flex-column mx-2'>
                    <h5 class='scout-subtitle'>Thr</h5>
                    <h5 class='scout-title'>{{report.throws}}</h5>
                </div>
            </div>
        </div>
    </div>
    <div class='card-body'>
        <div class='row'>
            {% with report.hitterstats_set.all|get_stat_by_name:"overall" as overall_stat %}
            <div class='col-md-2'>
                <h5 class='scout-title'>Overall</h5>
                <div class='stat-box'>
                <p>{{overall_stat.value}}</p>
                </div>
            </div>
            <div class='col-md-2'>
                <h5 class='scout-title'>Future</h5>
                <div class='stat-box'>
                <p>{{overall_stat.futurevalue}}</p>
                </div>
            </div>
            {% endwith %}
            <div class='col-md-8'>
                <h5 class='scout-title'>
                    Declarative Statement
                </h5>
                <p class='scout-text'>{{report.summary}}</p>
            </div>
        </div>
    </div>
</div>
<table class='table table-borderless hitter-table mt-2'>
    <thead>
        <tr>
            <th>Grade/FV</th>
            <th>Tool</th>
            <th width='90%'>Comments</th>
        </tr>
    </thead>
    <tbody>
        {% with report.hitterstats_set.all|order_by_custom_stat as stats %}
        {% for stat in stats %}
        {% if stat.stat != "overall" %}
        <tr>
            <td>{{stat.value}}/{{stat.futurevalue}}</td>
            <td>{{stat.stat}}</td>
            <td>{{stat.comment}}</td>
        </tr>
        {% endif %}
        {% endfor %}
        {% endwith %}
    </tbody>
</table>
<div class='d-flex justify-content-end'>
    <a href="/hitter-report/delete/{{report.id}}" class='btn btn-danger'>
        Delete Report
    </a>
</div>
{% endblock %}
